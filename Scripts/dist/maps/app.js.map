{"version":3,"sources":["app.js","product/productController.js","product/productDirective.js","product/productService.js","routeConfig.js"],"names":["app","angular","module","controller","$scope","productService","$http","$routeParams","url","name","id","products","init","console","log","getProducts","then","data","catch","response","add","form","$valid","newPoduct","post","push","delete","product","index","indexOf","splice","directive","$timeout","restrict","scope","templateUrl","link","element","attrs","setFocus","document","getElementById","focus","editProduct","$watch","oldVal","newVal","length","map","p","btnText","edit","canSave","put","isEdit","blur","active","service","self","this","get","create","config","$routeProvider","when","otherwise","template"],"mappings":"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","file":"../app.js","sourcesContent":["var app = angular.module('app', ['ngRoute']);","(function () {\r\n    'use strict',\r\n    angular.module('app').controller('productController', ['$scope', 'productService', '$http', '$routeParams',\r\n                    function ($scope, productService, $http, $routeParams) {\r\n        var url = '/api/product';\r\n        $scope.name = 'test name';\r\n        $scope.id = '';\r\n        $scope.products = [];\r\n\r\n        $scope.init = function () {\r\n            console.log('init');\r\n            //$http.get(url).then(function (data) {\r\n            //    console.log(data);\r\n            //    $scope.products = data;\r\n            //}).catch(function (response) {\r\n            //    console.log({ error: response });\r\n            //})\r\n            //$http.get(url).then(function success(data) {\r\n            //    console.log(data);\r\n            //    $scope.products = data;\r\n            //}, function error(response) {\r\n            //    console.log({ error: response });\r\n            //})\r\n\r\n            if ($routeParams.id) {\r\n                $scope.id = $routeParams.id\r\n            }\r\n\r\n            productService.getProducts(url).then(function (data) {\r\n                //console.log(data);\r\n                $scope.products = data.data;\r\n            }).catch(function (response) {\r\n                //console.log({ error: response });\r\n            })\r\n        }\r\n\r\n        $scope.add = function () {\r\n            console.log($scope.form.$valid);\r\n            var newPoduct = { name: $scope.name };\r\n            $http.post(url, newPoduct).then(function (data) {\r\n                //console.log(data);\r\n                $scope.products.push(data.data);\r\n            }).catch(function (response) {\r\n\r\n            });\r\n        }\r\n\r\n        $scope.delete = function (product) {\r\n            //console.log(product);\r\n            //product.name = 'updated';\r\n            \r\n            $http.delete(url+'/'+product.id ).then(function (data) {\r\n                var index = $scope.products.indexOf(product);\r\n                $scope.products.splice(index, 1);\r\n                //console.log({ products: $scope.products, index: index, data: data });\r\n            }).catch(function (response) {\r\n            })\r\n            \r\n        }\r\n    }])\r\n})()\r\n","(function () {\r\n    'use strict',\r\n    angular.module('app').directive('productTable', ['$http', '$timeout','$http', function ($http, $timeout, $http) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                products: '=',\r\n                delete: '&'\r\n            },\r\n            templateUrl: '/scripts/app/product/productDirective.html',\r\n            link: function (scope, element, attrs) {\r\n                //console.log({ products:scope.products });\r\n                //scope.delete = function (product) {\r\n                //    console.log(product);\r\n                //    scope.products.splice(0, 1);\r\n                //}\r\n\r\n                scope.editProduct = {};\r\n                var url = '/api/product';\r\n\r\n                //scope.products.map(function (p) {\r\n                //    scope.editBtnName[p.id] = 'Edit';\r\n                //});\r\n\r\n                scope.$watch(function () {\r\n                    return scope.products;\r\n                }, function (oldVal, newVal) {\r\n                    if (oldVal.length > 0) {\r\n                        scope.products.map(function (p) {\r\n                            scope.editProduct['p' + p.id] = {};\r\n                            scope.editProduct['p' + p.id].btnText = 'Edit';\r\n                            scope.editProduct['p' + p.id].name = p.name;\r\n                        });\r\n                    }\r\n                    //console.log({ products1: scope.products, edit: scope.editBtnName, newVal: oldVal });\r\n                })\r\n\r\n                console.log({ products: scope.products, edit: scope.editProduct });\r\n\r\n                scope.edit = function (product) {\r\n                    if (product.canSave) {\r\n                        product.canSave = false;\r\n                        scope.editProduct['p' + product.id].btnText = 'Saving';\r\n                        $http.put(url, product).then(function (data) {\r\n                            console.log(data);\r\n                        }).catch(function (response) {\r\n                            console.log(response);\r\n                        })\r\n\r\n                        scope.editProduct['p' + product.id].btnText = 'Edit';\r\n                        product.isEdit = false;\r\n                    } else {\r\n                        product.canSave = true;\r\n                        scope.editProduct['p' + product.id].btnText = 'Save';\r\n                        product.isEdit = true;\r\n                        setFocus(product);\r\n                    }\r\n                    //console.log({ element: element, attrs: attrs,productisEdit:product.isEdit });\r\n                    \r\n                    \r\n                    //console.log(product);\r\n                }\r\n\r\n                scope.blur = function (product) {\r\n                    console.log(product);\r\n                    product.isEdit = false;\r\n\r\n                    if (scope.editProduct['p' + product.id].name != product.name) {\r\n                        scope.editProduct['p' + product.id].btnText = 'Save';\r\n                        product.canSave = true;\r\n                    } else {\r\n                        scope.editProduct['p' + product.id].btnText = 'Edit';\r\n                        product.canSave = false;\r\n                    }\r\n                }\r\n\r\n                scope.active = function (product) {\r\n                    product.isEdit = true;\r\n                    setFocus(product);\r\n                }\r\n\r\n                function setFocus(product) {\r\n                    $timeout(function () { document.getElementById('product' + product.id).focus(); }, 100);\r\n\r\n                    //scope.$watch(function () {\r\n                    //    return product.isEdit;\r\n                    //}, function (oldVal, newVal) {\r\n                    //    if (oldVal == true && newVal == true) {\r\n                    //        var name = document.getElementById('product' + product.id);\r\n                    //        if(name!=null){\r\n                    //            name.focus();\r\n                    //        }\r\n                    //    }\r\n                    //})\r\n                }\r\n\r\n            }\r\n        }\r\n    }]);\r\n})()\r\n","(function () {\r\n    'use strict',\r\n    angular.module('app').service('productService', ['$http', function ($http) {\r\n        var self = this;\r\n        var url = '/api/product';\r\n        self.getProducts = function () {            \r\n            return $http.get(url);\r\n            //    .then(function success(response) {\r\n            //    console.log(response);\r\n            //    return response.data;\r\n            //}\r\n            //, function failed(response) {\r\n            //    throw response;\r\n            //}\r\n            //);\r\n        }\r\n\r\n        self.create = function (product) {\r\n            return $http.post(url).then(function success(response) {\r\n                return response.data;\r\n            }\r\n            //, function failed(response) {\r\n            //    throw response;\r\n            //}\r\n            );\r\n        }\r\n    }])\r\n})()\r\n","(function () {\r\n    'use strict',\r\n    angular.module('app').config(['$routeProvider', function ($routeProvider) {\r\n        $routeProvider.when('/', {\r\n            templateUrl: 'scripts/app/product/products.html',\r\n            controller: 'productController'\r\n        })\r\n        //optional id(?)\r\n        .when('/product/:id?', {\r\n            templateUrl: 'scripts/app/product/productsTest.html'\r\n        })\r\n        .otherwise({\r\n            template:'<h1>No selected</h1>'\r\n        })\r\n    }])\r\n})()\r\n"]}